<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Kats@teez Umrah Tracker</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
  <style>
    :root {
      --primary: #8E44AD;
      --primary-dark: #6C3483;
      --secondary: #2ECC71;
      --danger: #E74C3C;
      --warning: #F39C12;
      --light: #F5F5F5;
      --dark: #2C3E50;
      --text: #34495E;
    }
    
    body {
      font-family: 'Poppins', 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      padding: 20px;
      min-height: 100vh;
      margin: 0;
      color: var(--text);
      background-image: url('https://images.unsplash.com/photo-1519817650390-64a93db51149?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');
      background-size: cover;
      background-attachment: fixed;
      background-position: center;
      background-blend-mode: overlay;
    }
    
    h1 { 
      text-align: center; 
      color: white;
      margin-bottom: 10px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
      font-weight: 700;
    }
    
    .subtitle {
      text-align: center;
      color: rgba(255,255,255,0.9);
      margin-bottom: 30px;
      text-shadow: 0 1px 2px rgba(0,0,0,0.2);
      font-weight: 300;
    }
    
    .container {
      background: rgba(255, 255, 255, 0.95);
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.15);
      backdrop-filter: blur(5px);
      animation: fadeInUp 0.8s ease-out;
      max-width: 600px;
      margin: 20px auto;
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--dark);
    }
    
    input[type="number"], select {
      width: 100%;
      padding: 14px;
      border-radius: 8px;
      border: 2px solid #ddd;
      font-size: 16px;
      transition: all 0.3s;
      background: rgba(255,255,255,0.8);
    }
    
    input[type="number"]:focus, select:focus {
      border-color: var(--primary);
      outline: none;
      box-shadow: 0 0 0 3px rgba(142, 68, 173, 0.2);
      transform: translateY(-2px);
    }
    
    button {
      margin-top: 20px;
      padding: 14px 24px;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 600;
      width: 100%;
      transition: all 0.3s;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    
    button:hover { 
      background: linear-gradient(135deg, var(--primary-dark), var(--primary));
      transform: translateY(-3px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
    }
    
    button:active {
      transform: translateY(1px);
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .progress-container {
      margin-top: 30px;
      height: 26px;
      background: rgba(0,0,0,0.05);
      border-radius: 13px;
      overflow: hidden;
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
    }
    
    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      width: 0%;
      transition: width 0.8s cubic-bezier(0.65, 0, 0.35, 1);
      display: flex;
      align-items: center;
      justify-content: flex-end;
      padding-right: 12px;
      color: white;
      font-size: 12px;
      font-weight: bold;
      position: relative;
      overflow: hidden;
    }
    
    .progress-bar::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(
        90deg,
        rgba(255, 255, 255, 0) 0%,
        rgba(255, 255, 255, 0.3) 50%,
        rgba(255, 255, 255, 0) 100%
      );
      animation: shimmer 2s infinite;
    }
    
    @keyframes shimmer {
      0% {
        transform: translateX(-100%);
      }
      100% {
        transform: translateX(100%);
      }
    }
    
    .status {
      margin-top: 30px;
    }
    
    .status-item {
      margin-bottom: 15px;
      padding: 15px;
      background: rgba(255,255,255,0.7);
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
      transition: transform 0.3s;
    }
    
    .status-item:hover {
      transform: translateY(-3px);
    }
    
    .status-item strong {
      display: inline-block;
      min-width: 150px;
      color: var(--primary-dark);
    }
    
    .category-progress {
      margin-top: 25px;
      background: rgba(255,255,255,0.7);
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }
    
    .category-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
      padding-bottom: 10px;
      border-bottom: 1px solid rgba(0,0,0,0.05);
    }
    
    .category-progress-bar {
      height: 10px;
      background: rgba(0,0,0,0.05);
      border-radius: 5px;
      margin-top: 8px;
      overflow: hidden;
    }
    
    .category-progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--warning));
      width: 0%;
      transition: width 0.8s cubic-bezier(0.65, 0, 0.35, 1);
      position: relative;
    }
    
    .time-info-card {
      background: linear-gradient(135deg, rgba(46, 204, 113, 0.1), rgba(52, 152, 219, 0.1));
      padding: 20px;
      border-radius: 10px;
      margin-top: 25px;
      border-left: 5px solid var(--secondary);
      animation: pulse 2s infinite alternate;
    }
    
    @keyframes pulse {
      from {
        box-shadow: 0 0 0 0 rgba(46, 204, 113, 0.4);
      }
      to {
        box-shadow: 0 0 0 10px rgba(46, 204, 113, 0);
      }
    }
    
    .time-info-item {
      margin-bottom: 10px;
      display: flex;
      align-items: center;
    }
    
    .time-info-item span {
      margin-left: 10px;
    }
    
    .time-info-item strong {
      color: var(--secondary);
      min-width: 120px;
    }
    
    .transaction-history {
      margin-top: 30px;
      max-height: 300px;
      overflow-y: auto;
      padding-right: 10px;
    }
    
    .transaction-history::-webkit-scrollbar {
      width: 6px;
    }
    
    .transaction-history::-webkit-scrollbar-track {
      background: rgba(0,0,0,0.05);
      border-radius: 3px;
    }
    
    .transaction-history::-webkit-scrollbar-thumb {
      background: var(--primary);
      border-radius: 3px;
    }
    
    .transaction-item {
      display: flex;
      justify-content: space-between;
      padding: 15px;
      background: rgba(255,255,255,0.8);
      border-radius: 8px;
      margin-bottom: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
      transition: all 0.3s;
      animation: fadeIn 0.5s ease-out;
    }
    
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateX(-10px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    .transaction-item:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .transaction-positive {
      border-left: 5px solid var(--secondary);
    }
    
    .alert {
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      display: none;
      animation: bounceIn 0.5s;
    }
    
    @keyframes bounceIn {
      0% {
        transform: scale(0.8);
        opacity: 0;
      }
      50% {
        transform: scale(1.05);
      }
      100% {
        transform: scale(1);
        opacity: 1;
      }
    }
    
    .alert-success {
      background-color: rgba(46, 204, 113, 0.2);
      color: #27AE60;
      border-left: 5px solid var(--secondary);
    }
    
    .alert-error {
      background-color: rgba(231, 76, 60, 0.2);
      color: #C0392B;
      border-left: 5px solid var(--danger);
    }
    
    .emoji {
      font-size: 1.2em;
      margin-right: 5px;
    }
    
    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      background-color: var(--primary);
      opacity: 0;
      z-index: 9999;
      animation: confetti 3s ease-out;
    }
    
    @keyframes confetti {
      0% {
        transform: translateY(0) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) rotate(720deg);
        opacity: 0;
      }
    }
    
    @media (max-width: 480px) {
      body {
        padding: 10px;
      }
      
      .container {
        padding: 20px;
      }
      
      h1 {
        font-size: 24px;
      }
    }
  </style>
</head>
<body>

  <h1 class="animate__animated animate__fadeInDown">üßï Kats@teez Umrah Tracker</h1>
  <p class="subtitle animate__animated animate__fadeIn animate__delay-1s">Track your savings for the blessed journey</p>
  
  <div class="container">
    <div id="successAlert" class="alert alert-success"></div>
    <div id="errorAlert" class="alert alert-error"></div>
    
    <div class="form-group animate__animated animate__fadeIn animate__delay-1s">
      <label for="category">What are you saving for?</label>
      <select id="category">
        <option value="flight">‚úàÔ∏è Flight (R25,000)</option>
        <option value="accommodation">üè® Accommodation (R12,000)</option>
        <option value="misc">üç± Food & Other (R13,000)</option>
      </select>
    </div>

    <div class="form-group animate__animated animate__fadeIn animate__delay-1s">
      <label for="deposit">Add Deposit (R):</label>
      <input type="number" id="deposit" placeholder="e.g. 500" min="1" step="any" />
    </div>

    <button onclick="addDeposit()" class="animate__animated animate__fadeIn animate__delay-2s">Add Deposit</button>

    <div class="progress-container animate__animated animate__fadeIn animate__delay-2s">
      <div class="progress-bar" id="progressBar"></div>
    </div>

    <div class="status">
      <div class="status-item animate__animated animate__fadeIn animate__delay-2s">
        <strong>Total Goal:</strong> R<span id="goalAmount">50,000.00</span>
      </div>
      <div class="status-item animate__animated animate__fadeIn animate__delay-2s">
        <strong>Current Savings:</strong> R<span id="currentSavings">0.00</span>
      </div>
      <div class="status-item animate__animated animate__fadeIn animate__delay-2s">
        <strong>Progress:</strong> <span id="progressPercent">0%</span>
      </div>
      
      <div class="category-progress animate__animated animate__fadeIn animate__delay-3s">
        <h3>Category Progress</h3>
        <div class="category-item">
          <span>‚úàÔ∏è Flight</span>
          <span>R<span id="flightCurrent">0.00</span> / R25,000</span>
        </div>
        <div class="category-progress-bar">
          <div class="category-progress-fill" id="flightProgress"></div>
        </div>
        
        <div class="category-item">
          <span>üè® Accommodation</span>
          <span>R<span id="accommodationCurrent">0.00</span> / R12,000</span>
        </div>
        <div class="category-progress-bar">
          <div class="category-progress-fill" id="accommodationProgress"></div>
        </div>
        
        <div class="category-item">
          <span>üç± Food & Other</span>
          <span>R<span id="miscCurrent">0.00</span> / R13,000</span>
        </div>
        <div class="category-progress-bar">
          <div class="category-progress-fill" id="miscProgress"></div>
        </div>
      </div>
      
      <div class="time-info-card animate__animated animate__fadeIn animate__delay-3s">
        <h3>Savings Plan</h3>
        <div class="time-info-item">
          <span class="emoji">üìÜ</span>
          <strong>Months remaining:</strong>
          <span id="monthsRemaining">0</span>
        </div>
        <div class="time-info-item">
          <span class="emoji">üí∞</span>
          <strong>Amount left:</strong>
          R<span id="remainingAmount">0.00</span>
        </div>
        <div class="time-info-item">
          <span class="emoji">üìâ</span>
          <strong>Monthly target:</strong>
          R<span id="monthlyTarget">0.00</span>
        </div>
      </div>
      
      <div class="transaction-history animate__animated animate__fadeIn animate__delay-4s">
        <h3>Recent Transactions</h3>
        <div id="transactionsList"></div>
      </div>
    </div>
  </div>

  <script>
    // Configuration
    const goals = {
      flight: 25000,
      accommodation: 12000,
      misc: 13000
    };
    const totalGoal = goals.flight + goals.accommodation + goals.misc;
    const targetDateStr = "2026-11-01";
    let targetDate = new Date(targetDateStr);
    
    // State
    let currentSavings = {
      total: 0,
      flight: 0,
      accommodation: 0,
      misc: 0
    };
    
    let transactions = [];
    
    // DOM Elements
    const elements = {
      depositInput: document.getElementById('deposit'),
      categorySelect: document.getElementById('category'),
      goalAmount: document.getElementById('goalAmount'),
      currentSavings: document.getElementById('currentSavings'),
      progressPercent: document.getElementById('progressPercent'),
      progressBar: document.getElementById('progressBar'),
      flightCurrent: document.getElementById('flightCurrent'),
      accommodationCurrent: document.getElementById('accommodationCurrent'),
      miscCurrent: document.getElementById('miscCurrent'),
      flightProgress: document.getElementById('flightProgress'),
      accommodationProgress: document.getElementById('accommodationProgress'),
      miscProgress: document.getElementById('miscProgress'),
      monthsRemaining: document.getElementById('monthsRemaining'),
      remainingAmount: document.getElementById('remainingAmount'),
      monthlyTarget: document.getElementById('monthlyTarget'),
      transactionsList: document.getElementById('transactionsList'),
      successAlert: document.getElementById('successAlert'),
      errorAlert: document.getElementById('errorAlert')
    };
    
    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      loadData();
      formatCurrencyInputs();
    });
    
    // Format currency inputs
    function formatCurrencyInputs() {
      elements.depositInput.addEventListener('blur', (e) => {
        if (e.target.value) {
          e.target.value = parseFloat(e.target.value).toFixed(2);
        }
      });
    }
    
    // Load data from storage
    async function loadData() {
      try {
        const savedData = localStorage.getItem('umrah_savings');
        if (savedData) {
          const data = JSON.parse(savedData);
          currentSavings = data.currentSavings || currentSavings;
          transactions = data.transactions || transactions;
        }
        updateDisplay();
        showAlert('Data loaded successfully', 'success');
      } catch (e) {
        console.error("Load failed", e);
        showAlert('Failed to load data', 'error');
      }
    }
    
    // Save data to storage
    async function saveData() {
      try {
        const data = {
          currentSavings,
          transactions,
          goals,
          totalGoal,
          targetDate: targetDateStr
        };
        localStorage.setItem('umrah_savings', JSON.stringify(data));
      } catch (e) {
        console.error("Save failed", e);
        showAlert('Failed to save data', 'error');
      }
    }
    
    // Add deposit
    function addDeposit() {
      const depositAmount = parseFloat(elements.depositInput.value);
      const category = elements.categorySelect.value;
      
      // Validate input
      if (isNaN(depositAmount) {
        showAlert('Please enter a valid number', 'error');
        return;
      }
      
      if (depositAmount <= 0) {
        showAlert('Deposit amount must be positive', 'error');
        return;
      }
      
      // Update savings
      currentSavings.total += depositAmount;
      currentSavings[category] += depositAmount;
      
      // Cap at goal amounts
      if (currentSavings[category] > goals[category]) {
        const overflow = currentSavings[category] - goals[category];
        currentSavings[category] = goals[category];
        currentSavings.total -= overflow;
      }
      
      if (currentSavings.total > totalGoal) {
        currentSavings.total = totalGoal;
      }
      
      // Add transaction
      const transaction = {
        id: Date.now(),
        date: new Date().toLocaleDateString(),
        amount: depositAmount,
        category,
        type: 'deposit'
      };
      transactions.unshift(transaction);
      if (transactions.length > 10) transactions.length = 10;
      
      // Reset form
      elements.depositInput.value = '';
      
      // Save and update
      saveData();
      updateDisplay();
      showAlert(`Deposit of R${depositAmount.toFixed(2)} added successfully!`, 'success');
      
      // Animate progress
      animateProgress();
      
      // Create confetti if goal is reached
      if (currentSavings.total >= totalGoal) {
        createConfetti();
      }
    }
    
    // Create confetti effect
    function createConfetti() {
      for (let i = 0; i < 50; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random() * 100 + 'vw';
        confetti.style.backgroundColor = getRandomColor();
        confetti.style.width = Math.random() * 10 + 5 + 'px';
        confetti.style.height = Math.random() * 10 + 5 + 'px';
        document.body.appendChild(confetti);
        
        // Remove confetti after animation
        setTimeout(() => {
          confetti.remove();
        }, 3000);
      }
    }
    
    // Get random color for confetti
    function getRandomColor() {
      const colors = ['#8E44AD', '#2ECC71', '#3498DB', '#F39C12', '#E74C3C'];
      return colors[Math.floor(Math.random() * colors.length)];
    }
    
    // Update display
    function updateDisplay() {
      // Format numbers
      const formatCurrency = (num) => num.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
      
      // Update main progress
      elements.goalAmount.textContent = formatCurrency(totalGoal);
      elements.currentSavings.textContent = formatCurrency(currentSavings.total);
      
      const totalPercent = (currentSavings.total / totalGoal) * 100;
      elements.progressPercent.textContent = totalPercent.toFixed(1) + '%';
      
      // Update category progress
      elements.flightCurrent.textContent = formatCurrency(currentSavings.flight);
      elements.accommodationCurrent.textContent = formatCurrency(currentSavings.accommodation);
      elements.miscCurrent.textContent = formatCurrency(currentSavings.misc);
      
      // Update time info
      updateTimeInfo();
      
      // Update transactions
      updateTransactions();
    }
    
    // Animate progress bars
    function animateProgress() {
      // Total progress
      const totalPercent = (currentSavings.total / totalGoal) * 100;
      elements.progressBar.style.width = totalPercent + '%';
      elements.progressBar.textContent = totalPercent.toFixed(0) + '%';
      
      // Category progress
      const flightPercent = (currentSavings.flight / goals.flight) * 100;
      const accommodationPercent = (currentSavings.accommodation / goals.accommodation) * 100;
      const miscPercent = (currentSavings.misc / goals.misc) * 100;
      
      elements.flightProgress.style.width = flightPercent + '%';
      elements.accommodationProgress.style.width = accommodationPercent + '%';
      elements.miscProgress.style.width = miscPercent + '%';
    }
    
    // Update time information
    function updateTimeInfo() {
      const today = new Date();
      const diffTime = Math.abs(targetDate - today);
      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
      const diffMonths = Math.ceil(diffDays / 30);
      
      const remainingAmount = Math.max(totalGoal - currentSavings.total, 0);
      const monthlyTarget = remainingAmount / Math.max(diffMonths, 1);
      
      elements.monthsRemaining.textContent = diffMonths;
      elements.remainingAmount.textContent = remainingAmount.toFixed(2);
      elements.monthlyTarget.textContent = monthlyTarget.toFixed(2);
    }
    
    // Update transactions list
    function updateTransactions() {
      elements.transactionsList.innerHTML = '';
      
      if (transactions.length === 0) {
        elements.transactionsList.innerHTML = '<p>No transactions yet</p>';
        return;
      }
      
      transactions.forEach(transaction => {
        const transactionEl = document.createElement('div');
        transactionEl.className = `transaction-item transaction-${transaction.type}`;
        
        const dateAmount = document.createElement('div');
        dateAmount.innerHTML = `
          <span>${transaction.date}</span>
          <strong>R${transaction.amount.toFixed(2)}</strong>
        `;
        
        const category = document.createElement('div');
        category.textContent = getCategoryName(transaction.category);
        category.style.fontWeight = '600';
        
        transactionEl.appendChild(dateAmount);
        transactionEl.appendChild(category);
        elements.transactionsList.appendChild(transactionEl);
      });
    }
    
    // Get category display name
    function getCategoryName(category) {
      switch(category) {
        case 'flight': return '‚úàÔ∏è Flight';
        case 'accommodation': return 'üè® Accommodation';
        case 'misc': return 'üç± Food & Other';
        default: return category;
      }
    }
    
    // Show alert message
    function showAlert(message, type) {
      const alertEl = type === 'success' ? elements.successAlert : elements.errorAlert;
      alertEl.textContent = message;
      alertEl.style.display = 'block';
      
      // Hide other alert
      if (type === 'success') {
        elements.errorAlert.style.display = 'none';
      } else {
        elements.successAlert.style.display = 'none';
      }
      
      // Auto-hide after 3 seconds
      setTimeout(() => {
        alertEl.style.display = 'none';
      }, 3000);
    }
  </script>
</body>
</html>